ÿØÿÛ«schematic
  «component (-3600,-400) 0 0
    «symbol Vpulse
      «type: V»
      «description: Independent Voltage Source»
      «shorted pins: false»
      «line (0,-130) (0,-200) 0 0 0x1000000 -1 -1»
      «line (0,200) (0,130) 0 0 0x1000000 -1 -1»
      «line (-70,-30) (-50,-30) 0 0 0x1000000 -1 -1»
      «line (-50,-30) (-40,30) 0 0 0x1000000 -1 -1»
      «line (-40,30) (0,30) 0 0 0x1000000 -1 -1»
      «line (0,30) (10,-30) 0 0 0x1000000 -1 -1»
      «line (10,-30) (70,-30) 0 0 0x1000000 -1 -1»
      «rect (-25,77) (25,73) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «rect (-2,50) (2,100) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «rect (-25,-73) (25,-77) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «ellipse (-130,130) (130,-130) 0 0 0 0x1000000 0x1000000 -1 -1»
      «text (100,150) 1 7 0 0x1000000 -1 -1 "V1"»
      «text (100,-150) 1 7 0 0x1000000 -1 -1 "PULSE 0 1 0 0 0 0.1/fclk 1/fclk"»
      «pin (0,200) (0,0) 1 0 0 0x0 -1 "+"»
      «pin (0,-200) (0,0) 1 0 0 0x0 -1 "-"»
    »
  »
  «component (-1800,600) 0 0
    «symbol Vsin
      «type: V»
      «description: Independent Voltage Source»
      «shorted pins: false»
      «line (0,-130) (0,-200) 0 0 0x1000000 -1 -1»
      «line (0,200) (0,130) 0 0 0x1000000 -1 -1»
      «rect (-25,77) (25,73) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «rect (-2,50) (2,100) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «rect (-25,-73) (25,-77) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «ellipse (-130,130) (130,-130) 0 0 0 0x1000000 0x1000000 -1 -1»
      «arc3p (0,0) (60,0) (30,0) 0 0 0x1000000 -1 -1»
      «arc3p (0,0) (-60,0) (-30,0) 0 0 0x1000000 -1 -1»
      «text (100,150) 1 7 0 0x1000000 -1 -1 "V2"»
      «text (100,-150) 1 7 0 0x1000000 -1 -1 "SIN 0 1 1"»
      «pin (0,200) (0,0) 1 0 0 0x0 -1 "+"»
      «pin (0,-200) (0,0) 1 0 0 0x0 -1 "-"»
    »
  »
  «component (-300,-2800) 0 0
    «symbol E
      «type: E»
      «description: Voltage Dependent Voltage Source»
      «shorted pins: false»
      «line (0,-130) (0,-200) 0 0 0x1000000 -1 -1»
      «line (0,200) (0,130) 0 0 0x1000000 -1 -1»
      «line (-200,100) (-150,100) 0 0 0x1000000 -1 -1»
      «line (-109,71) (-150,100) 0 0 0x1000000 -1 -1»
      «line (-200,-100) (-150,-100) 0 0 0x1000000 -1 -1»
      «line (-109,-71) (-150,-100) 0 0 0x1000000 -1 -1»
      «line (-160,80) (-160,50) 0 0 0x1000000 -1 -1»
      «line (-175,65) (-145,65) 0 0 0x1000000 -1 -1»
      «line (-175,-67) (-145,-67) 0 0 0x1000000 -1 -1»
      «rect (-25,-73) (25,-77) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «rect (-25,77) (25,73) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «rect (-2,50) (2,100) 0 0 0 0x1000000 0x3000000 -1 0 -1»
      «ellipse (-130,130) (130,-130) 0 0 0 0x1000000 0x1000000 -1 -1»
      «text (100,150) 1 7 0 0x1000000 -1 -1 "E1"»
      «text (100,-150) 1 7 0 0x1000000 -1 -1 "Laplace=Kp+Ki_analog/s+Kd_analog*s"»
      «pin (0,200) (0,0) 1 0 0 0x0 -1 ""»
      «pin (0,-200) (0,0) 1 0 0 0x0 -1 ""»
      «pin (-200,100) (0,0) 1 0 0 0x0 -1 ""»
      «pin (-200,-100) (0,0) 1 0 0 0x0 -1 ""»
    »
  »
  «component (600,-100) 0 0
    «symbol pid_controller
      «type: Ø(.DLL)»
      «shorted pins: false»
      «rect (-1000,1300) (1000,-1200) 0 0 0 0x4000000 0x4000000 -1 1 -1»
      «text (0,1400) 1 0 0 0x0 -1 -1 "X1"»
      «text (50,1150) 1 0 0 0x0 -1 -1 "PID_controller"»
      «text (60,680) 1 0 0 0x0 -1 -1 "float OutHiLim=<10>"»
      «text (70,490) 1 0 0 0x0 -1 -1 "float OutLoLim=<-10>"»
      «text (120,320) 1 0 0 0x0 -1 -1 "float IntRateLim=<1>"»
      «text (-170,130) 1 0 0 0x0 -1 -1 "float Kp=<1>"»
      «text (-70,-50) 1 0 0 0x0 -1 -1 "float Ts=<Ts>"»
      «text (-140,-240) 1 0 0 0x0 -1 -1 "float Ti=<Ti>"»
      «text (160,-400) 1 0 0 0x0 -1 -1 "bool Ki_enable=<true>"»
      «text (-110,-570) 1 0 0 0x0 -1 -1 "float Td=<Td>"»
      «text (200,-750) 1 0 0 0x0 -1 -1 "bool Kd_enable=<true>"»
      «text (-30,-940) 1 0 0 0x0 -1 -1 "float Kp_aw=<0>"»
      «pin (-1000,1000) (100,-100) 1 14 145 0x0 -1 "ref"»
      «pin (-1000,400) (100,-100) 1 14 17 0x0 -1 "clk"»
      «pin (-1000,-200) (100,-100) 1 14 145 0x0 -1 "fb"»
      «pin (-1000,-800) (100,-90) 1 14 145 0x0 -1 "uff"»
      «pin (1000,1000) (-100,-50) 1 14 146 0x0 -1 "u"»
    »
  »
  «net (-3600,-800) 1 13 0 "GND"»
  «net (-600,-900) 1 11 0 "GND"»
  «net (-1800,300) 1 13 0 "GND"»
  «net (2200,900) 1 7 0 "ctrl_digital"»
  «net (-1800,900) 1 14 0 "error"»
  «net (-3100,-100) 1 14 0 "clk"»
  «net (-300,-3200) 1 13 0 "GND"»
  «net (900,-2400) 1 7 0 "ctrl_analog"»
  «net (-600,-300) 1 11 0 "GND"»
  «junction (-300,-3100)»
  «junction (-1200,900)»
  «wire (-3600,-200) (-3600,-100) "clk"»
  «wire (-1800,800) (-1800,900) "error"»
  «wire (-1800,300) (-1800,400) "GND"»
  «wire (-1200,900) (-400,900) "error"»
  «wire (2200,900) (1600,900) "ctrl_digital"»
  «wire (-3600,-100) (-3100,-100) "clk"»
  «wire (-300,-3100) (-300,-3000) "GND"»
  «wire (-300,-3100) (-500,-3100) "GND"»
  «wire (-300,-3200) (-300,-3100) "GND"»
  «wire (-500,-3100) (-500,-2900) "GND"»
  «wire (-500,-2700) (-1200,-2700) "error"»
  «wire (-300,-2600) (-300,-2400) "ctrl_analog"»
  «wire (-300,-2400) (900,-2400) "ctrl_analog"»
  «wire (-3100,-100) (-800,-100) "clk"»
  «wire (-1200,-2700) (-1200,900) "error"»
  «wire (-1800,900) (-1200,900) "error"»
  «wire (-3600,-800) (-3600,-600) "GND"»
  «wire (-800,-100) (-800,300) "clk"»
  «wire (-800,300) (-400,300) "clk"»
  «wire (-600,-300) (-400,-300) "GND"»
  «wire (-600,-900) (-400,-900) "GND"»
  «rect (-1000,-2050) (1750,-3400) 0 0 2 0x4000000 0x1000000 -1 0 -1»
  «text (-3600,1650) 1 7 0 0x1000000 -1 -1 "ï»¿.plot V(ctrl_analog) V(ctrl_digital)\n.plot V(error)"»
  «text (-3550,2050) 1 7 0 0x1000000 -1 -1 "ï»¿.tran 1"»
  «text (0,-2150) 1 7 1 0x1000000 -1 -1 "ï»¿S-domain PID Controller"»
  «text (-390,2550) 1 7 0 0x1000000 -1 -1 "ï»¿.param fclk=50\n.param Kp=1\n.param Ts=1/fclk\n.param Ti=1/10\n.param Td=1/50\n.param Ki_analog = Kp/Ti\n.param Kd_analog = Kp*Td"»
  «text (-350,3250) 1 7 1 0x1000000 -1 -1 "ï»¿PID Gain"»
  «text (-930,3650) 1 15 1 0x1000000 -1 -1 "ï»¿Test case same as: https://github.com/robdunn4/QSpice/tree/main/PID_Controller"»
»

